<!DOCTYPE html>
<html lang="{{ session.get('lang', 'es') }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WS | Window Shopping</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

    <!-- ========================================================= -->
    <!-- ENCABEZADO Y LOGO -->
    <!-- ========================================================= -->
    <header>
        <div class="header-container">
            <h1 class="logo">WS</h1>
            <nav>
                <ul>
                    {% if is_logged() %}
                        <li><a href="{{ url_for('dashboard') }}">{{ t('Inicio', 'Home', '首頁') }}</a></li>
                        <li><a href="{{ url_for('carrito') }}">{{ t('Carrito', 'Cart', '購物車') }}</a></li>
                        <li><a href="{{ url_for('logout') }}">{{ t('Cerrar sesión', 'Logout', '登出') }}</a></li>
                    {% else %}
                        <li><a href="{{ url_for('home') }}">{{ t('Inicio', 'Home', '首頁') }}</a></li>
                        <li><a href="{{ url_for('login') }}">{{ t('Iniciar sesión', 'Login', '登入') }}</a></li>
                        <li><a href="{{ url_for('register') }}">{{ t('Registrarse', 'Register', '註冊') }}</a></li>
                    {% endif %}
                </ul>
            </nav>

            <!-- Selector de idioma -->
            <div class="lang-selector">
                <a href="{{ url_for('set_lang', lang='es') }}">🇪🇸</a>
                <a href="{{ url_for('set_lang', lang='en') }}">🇬🇧</a>
                <a href="{{ url_for('set_lang', lang='zh') }}">🇨🇳</a>
            </div>
        </div>
    </header>

    <!-- ========================================================= -->
    <!-- CONTENIDO PRINCIPAL -->
    <!-- ========================================================= -->
    <main>
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <ul class="flash-messages">
                    {% for msg in messages %}
                        <li>{{ msg }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        {% block content %}
        <!-- Aquí se insertan los contenidos dinámicos -->
        {% endblock %}
    </main>

    <!-- ========================================================= -->
    <!-- PIE DE PÁGINA -->
    <!-- ========================================================= -->
    <footer>
        <p>© 2025 WS | Window Shopping — {{ t("Todos los derechos reservados", "All rights reserved", "版權所有") }}</p>
    </footer>

</body>
</html>
