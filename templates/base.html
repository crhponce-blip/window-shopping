<!DOCTYPE html>
<html lang="{{ session.get('lang','es') }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸŒ Window Shopping</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
  <header class="navbar glass-card">
    <div class="logo">ğŸªŸ <b>WS</b></div>
    <nav>
      <a href="{{ url_for('home') }}">{{ t("Inicio","Home","ä¸»é ") }}</a>
      <a href="{{ url_for('compras') }}">{{ t("Empresas","Companies","å…¬å¸") }}</a>
      <a href="{{ url_for('servicios') }}">{{ t("Servicios","Services","æœå‹™") }}</a>
      <a href="{{ url_for('carrito') }}">{{ t("Carrito","Cart","è³¼ç‰©è»Š") }}</a>

      {% if 'user' in session %}
        <a href="{{ url_for('dashboard') }}">{{ t("Panel de Usuario","User Dashboard","ç”¨æˆ¶ä¸»é ") }}</a>
        <a href="{{ url_for('perfil') }}">{{ t("Perfil","Profile","å€‹äººè³‡æ–™") }}</a>
        <a href="{{ url_for('logout') }}">{{ t("Salir","Logout","ç™»å‡º") }}</a>
      {% else %}
        <a href="{{ url_for('login') }}">{{ t("Iniciar sesiÃ³n","Login","ç™»å…¥") }}</a>
        <a href="{{ url_for('register_router') }}">{{ t("Registrarse","Register","è¨»å†Š") }}</a>
      {% endif %}
    </nav>

    <form method="post" action="{{ url_for('set_lang') }}" class="lang-form">
      <select name="lang" onchange="this.form.submit()">
        <option value="es" {% if session.get('lang','es')=='es' %}selected{% endif %}>ğŸ‡¨ğŸ‡± ES</option>
        <option value="en" {% if session.get('lang')=='en' %}selected{% endif %}>ğŸ‡ºğŸ‡¸ EN</option>
        <option value="zh" {% if session.get('lang')=='zh' %}selected{% endif %}>ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
      </select>
    </form>
  </header>

  <main class="main-content">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-container">
          {% for category, msg in messages %}
            <div class="flash {{ category }}">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>

  <footer class="footer glass-card">
    <p>Â© 2025 Window Shopping â€” {{ t("Conectamos productores chilenos con compradores internacionales","Connecting Chilean producers with international buyers","é€£æ¥æ™ºåˆ©ç”Ÿç”¢å•†èˆ‡åœ‹éš›è²·å®¶") }}</p>
  </footer>
</body>
</html>
