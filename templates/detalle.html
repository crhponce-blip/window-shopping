{% extends "base.html" %}
{% block content %}
<section class="detalle-container glass-card fade-in">
  <div class="detalle-card">
    <h2 class="title-gradient">{{ producto.nombre }}</h2>

    <p><strong>{{ t("CategorÃ­a", "Category", "é¡åˆ¥") }}:</strong> {{ producto.categoria }}</p>

    <img src="{{ producto.imagen or url_for('static', filename='images/default_product.png') }}"
         alt="{{ producto.nombre }}" class="detalle-img" style="max-width:100%;border-radius:10px;">

    <p>{{ producto.descripcion }}</p>

    <p><strong>{{ t("Precio", "Price", "åƒ¹æ ¼") }}:</strong> ${{ producto.precio }}</p>

    <p><strong>{{ t("Disponibilidad", "Availability", "å¯ç”¨æ€§") }}:</strong>
      {% if producto.stock > 0 %}
        {{ t("En stock", "In stock", "æœ‰åº«å­˜") }}
      {% else %}
        {{ t("Agotado", "Out of stock", "ç¼ºè²¨") }}
      {% endif %}
    </p>

    <p><strong>{{ t("Vendedor", "Seller", "è³£å®¶") }}:</strong>
      <a href="{{ url_for('perfil_publico', id=producto.vendedor_id) }}" class="link">{{ producto.vendedor_nombre }}</a>
    </p>

    <div class="detalle-actions mt-3">
      <form action="{{ url_for('carrito_agregar_directo') }}" method="POST" class="inline-form">
        <input type="hidden" name="empresa" value="{{ producto.vendedor_nombre }}">
        <input type="hidden" name="descripcion" value="{{ producto.nombre }}">
        <button type="submit" class="btn btn-success">ğŸ›’ {{ t("Agregar al carrito", "Add to Cart", "åŠ å…¥è³¼ç‰©è»Š") }}</button>
      </form>

      <form action="{{ url_for('ocultar_publicacion', pub_id=producto.id) }}" method="POST" class="inline-form">
        <button type="submit" class="btn btn-secondary">ğŸ™ˆ {{ t("Eliminar de vista", "Remove from view", "å¾è¦–åœ–ä¸­åˆªé™¤") }}</button>
      </form>
    </div>

    <div class="detalle-footer mt-3">
      {% if not cooldown_activo %}
        <form method="POST" action="{{ url_for('enviar_mensaje', id=producto.vendedor_id) }}">
          <textarea name="mensaje" placeholder="{{ t('Escribe tu mensaje al vendedor...', 'Write your message to the seller...', 'å¯«ä¿¡çµ¦è³£å®¶...') }}" required></textarea>
          <button type="submit" class="btn btn-primary">{{ t("Enviar Mensaje", "Send Message", "ç™¼é€è¨Šæ¯") }}</button>
        </form>
      {% else %}
        <div class="flash warning">
          {{ t("Solo puedes enviar un mensaje cada 3 dÃ­as â³", "You can only send a message every 3 days â³", "æ‚¨æ¯3å¤©åªèƒ½ç™¼é€ä¸€æ¬¡è¨Šæ¯ â³") }}
        </div>
      {% endif %}
    </div>
  </div>
</section>
{% endblock %}
