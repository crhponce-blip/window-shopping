{% extends "base.html" %}
{% block content %}

<div class="card">
  <h2>{{ t("Crear cuenta","Create account","建立帳戶") }}</h2>
  <p class="help">{{ t(
    "Selecciona tu origen y tipo de perfil. Si eliges 'Ambos', se registrará como Compra/Venta y luego podrás agregar servicios en tu Perfil.",
    "Choose your origin and profile type. If you select 'Both', you'll register as Buy/Sell and later add services in Profile.",
    "選擇來源與檔案類型。若選擇「同時」，將以買賣註冊，之後可在「個人資料」新增服務。"
  ) }}</p>

  <form class="form-vert" method="get" action="{{ url_for('register') }}">
    <!-- Origen -->
    <label for="nac"><strong>{{ t("Nacionalidad","Origin","來源") }}</strong></label>
    <select id="nac" name="nac" required>
      <option value="nacional">{{ t("Nacional","National","國內") }}</option>
      <option value="extranjero">{{ t("Extranjero","Foreign","國外") }}</option>
    </select>

    <!-- Tipo de perfil (solo visible si nacional) -->
    <div id="tipo-wrapper">
      <label for="tipo"><strong>{{ t("Tipo de perfil","Profile type","檔案類型") }}</strong></label>
      <select id="tipo" name="tipo" required>
        <option value="compra_venta">{{ t("Compra/Venta","Buy/Sell","買賣") }}</option>
        <option value="servicios">{{ t("Servicios","Services","服務") }}</option>
        <option value="ambos">{{ t("Ambos","Both","同時") }}</option>
      </select>
    </div>

    <button class="btn" type="submit">{{ t("Continuar","Continue","繼續") }}</button>
  </form>
</div>

<script>
  const nac = document.getElementById('nac');
  const tipoWrapper = document.getElementById('tipo-wrapper');
  function syncTipo() {
    if (nac.value === 'extranjero') {
      tipoWrapper.style.display = 'none';
    } else {
      tipoWrapper.style.display = '';
    }
  }
  nac.addEventListener('change', syncTipo);
  syncTipo();
</script>

{% endblock %}
