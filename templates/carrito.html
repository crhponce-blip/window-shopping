{% extends "base.html" %}
{% block content %}
<h2>ðŸ›’ Carrito de compras</h2>

{% if cart and cart|length > 0 %}
  <form method="POST">
    <table>
      <tr>
        <th>#</th>
        <th>Empresa</th>
        <th>Producto / Servicio</th>
        <th>Cantidad</th>
        <th>Origen / UbicaciÃ³n</th>
        <th>Precio</th>
        <th>AcciÃ³n</th>
      </tr>
      {% for i, item in enumerate(cart) %}
      <tr>
        <td>{{ i+1 }}</td>
        <td>{{ item.empresa }}</td>
        <td>{{ item.producto or item.servicio }}</td>
        <td>{{ item.cantidad or item.capacidad }}</td>
        <td>{{ item.origen or item.ubicacion }}</td>
        <td>{{ item.precio_caja or item.precio_kilo or '-' }}</td>
        <td>
          <button type="submit" name="action" value="remove:{{ i }}" class="btn danger">Eliminar</button>
        </td>
      </tr>
      {% endfor %}
    </table>

    <div style="margin-top:15px;">
      <button type="submit" name="action" value="clear" class="btn danger">Vaciar carrito</button>
    </div>
  </form>
{% else %}
  <p>No tienes productos o servicios en el carrito.</p>
  <a href="{{ url_for('dashboard') }}" class="btn">Volver al panel</a>
{% endif %}
{% endblock %}
