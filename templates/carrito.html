{% extends "base.html" %}
{% block content %}
<h2>🛒 Carrito</h2>

{% if cart and cart|length > 0 %}
  <form method="post" action="{{ url_for('checkout') }}">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Empresa</th>
          <th>Rol</th>
          <th>Tipo</th>
          <th>Descripción</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody>
        {% for i in range(cart|length) %}
          {% set item = cart[i] %}
          <tr>
            <td>{{ i + 1 }}</td>
            <td>{{ item.empresa }}</td>
            <td>{{ item.rol }}</td>
            <td>{{ item.tipo }}</td>
            <td>{{ item.descripcion }}</td>
            <td>
              <form method="post" action="{{ url_for('cart_remove', index=i) }}">
                <button type="submit">❌ Eliminar</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <br>
    <button type="submit">✅ Enviar Solicitud</button>
  </form>

  <form method="post" action="{{ url_for('cart_clear') }}">
    <button type="submit">🗑 Vaciar Carrito</button>
  </form>

{% else %}
  <p>No tienes productos o servicios en el carrito.</p>
{% endif %}
{% endblock %}
