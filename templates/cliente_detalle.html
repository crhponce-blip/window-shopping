{% extends "base.html" %}
{% block content %}
<main class="fade-in py-5">
  <div class="container col-lg-9">
    <div class="glass-card p-4 mb-4 shadow-lg text-light">
      <h2 class="title-gradient mb-3">{{ c.empresa }}</h2>
      <p class="mb-1">
        <strong>{{ t("Rol") }}:</strong> {{ c.rol }} |
        <strong>{{ t("Tipo") }}:</strong> {{ c.tipo }}
      </p>
      {% if c.pais %}
      <p><strong>{{ t("Pa√≠s") }}:</strong> {{ c.pais }}</p>
      {% endif %}
      {% if c.direccion %}
      <p><strong>{{ t("Direcci√≥n") }}:</strong> {{ c.direccion }}</p>
      {% endif %}
      {% if c.telefono %}
      <p><strong>{{ t("Tel√©fono") }}:</strong> {{ c.telefono }}</p>
      {% endif %}
      <p class="text-muted small">{{ c.descripcion or t("Sin descripci√≥n disponible.") }}</p>
    </div>

    <!-- üì¶ Productos -->
    <div class="glass-card p-4 mb-4 shadow-lg">
      <h4 class="text-light mb-3">üßæ {{ t("Productos o Servicios") }}</h4>

      {% if c.items %}
      <div class="list-group">
        {% for item in c.items %}
        <div class="list-group-item bg-transparent text-light d-flex justify-content-between align-items-start flex-wrap border-secondary border-opacity-25">
          <div class="me-3 flex-grow-1">
            <h6 class="fw-bold mb-1">{{ item.nombre }}</h6>
            <p class="small mb-1 text-muted">{{ item.detalle }}</p>
          </div>
          <div class="text-end mt-2 mt-md-0">
            <form method="get" action="{{ url_for('carrito_agregar', pub_id='direct-' ~ c.username ~ '-' ~ loop.index) }}">
              <button type="submit" class="btn btn-outline-success btn-sm shadow-sm">
                üõí {{ t("Agregar al carrito") }}
              </button>
            </form>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <p class="text-muted">{{ t("Esta empresa no tiene publicaciones activas.") }}</p>
      {% endif %}
    </div>

    <div class="glass-card p-4 mb-4 shadow-lg">
      <h5 class="mb-3 text-light">‚úâÔ∏è {{ t("Enviar mensaje a la empresa") }}</h5>
      <form method="post" action="{{ url_for('mensajes') }}">
        <input type="hidden" name="destino" value="{{ c.email }}">
        <textarea name="contenido" class="form-control mb-3 bg-dark text-light border-secondary"
                  placeholder="{{ t('Escribe un mensaje...') }}" rows="3" required></textarea>
        <div class="d-grid">
          <button type="submit" class="btn btn-primary btn-lg shadow-sm">
            üì© {{ t("Enviar mensaje") }}
          </button>
        </div>
      </form>
    </div>

    <div class="text-center">
      <a href="{{ url_for('clientes') }}" class="btn btn-outline-light shadow-sm">
        ‚Üê {{ t("Volver") }}
      </a>
    </div>
  </div>
</main>
{% endblock %}
