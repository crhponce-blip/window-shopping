{% extends "base.html" %}
{% block content %}

<main class="fade-in py-5">
  <div class="container col-lg-9">
    <!-- ğŸ¢ Datos generales de la empresa -->
    <div class="glass-card p-4 mb-4 shadow-lg text-light">
      <h2 class="title-gradient mb-3">{{ c.empresa }}</h2>
      <p class="mb-1">
        <strong>{{ t("Rol", "Role", "è§’è‰²") }}:</strong> {{ c.rol }} |
        <strong>{{ t("Tipo", "Type", "é¡å‹") }}:</strong> {{ c.tipo }}
      </p>
      {% if c.pais %}
      <p class="mb-1"><strong>{{ t("PaÃ­s", "Country", "åœ‹å®¶") }}:</strong> {{ c.pais }}</p>
      {% endif %}
      {% if c.direccion %}
      <p class="mb-1"><strong>{{ t("DirecciÃ³n", "Address", "åœ°å€") }}:</strong> {{ c.direccion }}</p>
      {% endif %}
      {% if c.telefono %}
      <p class="mb-3"><strong>{{ t("TelÃ©fono", "Phone", "é›»è©±") }}:</strong> {{ c.telefono }}</p>
      {% endif %}
      {% if c.descripcion %}
      <p class="text-muted small">{{ c.descripcion }}</p>
      {% else %}
      <p class="text-muted small">{{ t("Sin descripciÃ³n disponible.", "No description available.", "æš«ç„¡æè¿°") }}</p>
      {% endif %}
    </div>

    <!-- ğŸ“¦ Productos o Servicios -->
    <div class="glass-card p-4 mb-4 shadow-lg">
      <h4 class="text-light mb-3">ğŸ§¾ {{ t("Productos o Servicios", "Products or Services", "ç”¢å“æˆ–æœå‹™") }}</h4>

      {% if c.items %}
      <div class="list-group">
        {% for item in c.items %}
        <div class="list-group-item bg-transparent text-light d-flex justify-content-between align-items-start flex-wrap border-secondary border-opacity-25">
          <div class="me-3 flex-grow-1">
            <h6 class="fw-bold mb-1">{{ item.nombre }}</h6>
            <p class="small mb-1 text-muted">{{ item.detalle }}</p>
          </div>
          <div class="text-end mt-2 mt-md-0">
            <form method="get" action="{{ url_for('carrito_agregar', pub_id='direct-' ~ c.username ~ '-' ~ loop.index) }}">
              <button type="submit" class="btn btn-outline-success btn-sm shadow-sm">
                ğŸ›’ {{ t("Agregar al carrito", "Add to cart", "åŠ å…¥è³¼ç‰©è»Š") }}
              </button>
            </form>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <p class="text-muted">{{ t("Esta empresa no tiene publicaciones activas.", "This company has no active listings.", "è©²å…¬å¸ç›®å‰æ²’æœ‰ä¸Šæ¶é …ç›®ã€‚") }}</p>
      {% endif %}
    </div>

    <!-- ğŸ’¬ Enviar mensaje -->
    <div class="glass-card p-4 mb-4 shadow-lg">
      <h5 class="mb-3 text-light">âœ‰ï¸ {{ t("Enviar mensaje a la empresa", "Send a message to this company", "ç™¼é€è¨Šæ¯çµ¦å…¬å¸") }}</h5>
      <form method="post" action="{{ url_for('mensajes') }}">
        <input type="hidden" name="destino" value="{{ c.email }}">
        <textarea name="contenido" class="form-control mb-3 bg-dark text-light border-secondary"
                  placeholder="{{ t('Escribe un mensaje...', 'Write a message...', 'æ’°å¯«è¨Šæ¯...') }}" rows="3" required></textarea>
        <div class="d-grid">
          <button type="submit" class="btn btn-primary btn-lg shadow-sm">
            ğŸ“© {{ t("Enviar mensaje", "Send Message", "ç™¼é€") }}
          </button>
        </div>
      </form>
    </div>

    <!-- ğŸ”™ Volver -->
    <div class="text-center">
      <a href="{{ url_for('clientes') }}" class="btn btn-outline-light shadow-sm">
        â† {{ t("Volver", "Back", "è¿”å›") }}
      </a>
    </div>
  </div>
</main>

{% endblock %}
