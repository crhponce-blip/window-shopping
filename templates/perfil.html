{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>{{ t("Mi Perfil","My Profile","我的檔案") }}</h2>
  {% if mensaje %}<div class="flash">{{ mensaje }}</div>{% endif %}

  <form method="post" class="form-vert">
    <input type="hidden" name="action" value="save_profile">
    <label>Empresa</label><input type="text" name="empresa" value="{{ perfil.empresa }}">
    <label>Email</label><input type="text" name="email" value="{{ perfil.email }}">
    <label>Teléfono</label><input type="text" name="telefono" value="{{ perfil.telefono }}">
    <label>Dirección</label><input type="text" name="direccion" value="{{ perfil.direccion }}">
    <label>Descripción</label><textarea name="descripcion">{{ perfil.descripcion }}</textarea>
    <button class="btn" type="submit">{{ t("Guardar","Save","保存") }}</button>
  </form>
</div>

<div class="card">
  <h3>{{ t("Agregar ítem","Add item","新增項目") }}</h3>
  <form method="post" class="form-vert" id="addItemForm">
    <input type="hidden" name="action" value="add_item">

    <label>{{ t("Tipo de ítem","Item type","項目類型") }}</label>
    <select name="tipo_perfil_item" id="tipo_perfil_item">
      <option value="compra_venta">{{ t("Compra/Venta","Buy/Sell","買賣") }}</option>
      <option value="servicios">{{ t("Servicios","Services","服務") }}</option>
    </select>

    <div id="block-cv">
      <label>{{ t("Subtipo","Subtype","子類型") }}</label>
      <select name="subtipo">
        <option value="oferta">{{ t("Oferta","Offer","供應") }}</option>
        <option value="demanda">{{ t("Demanda","Demand","需求") }}</option>
      </select>
      <label>Producto</label><input type="text" name="producto">
      <label>Variedad</label><input type="text" name="variedad">
      <div class="row">
        <div><label>Cantidad</label><input type="text" name="cantidad" placeholder="120"></div>
        <div><label>Bulto</label><input type="text" name="bulto" placeholder="pallets / cajas / kg"></div>
        <div><label>Origen</label><input type="text" name="origen" placeholder="V Región"></div>
      </div>
      <div class="row">
        <div><label>Precio/caja</label><input type="text" name="precio_caja" placeholder="$12"></div>
        <div><label>Precio/kg</label><input type="text" name="precio_kilo" placeholder="$1.6"></div>
      </div>
    </div>

    <div id="block-srv" style="display:none">
      <label>Servicio</label><input type="text" name="servicio" placeholder="Transporte reefer">
      <label>Capacidad</label><input type="text" name="capacidad" placeholder="35 camiones">
      <label>Ubicación</label><input type="text" name="ubicacion" placeholder="Valparaíso">
    </div>

    <button class="btn" type="submit">{{ t("Agregar ítem","Add item","新增項目") }}</button>
  </form>
</div>

<script>
  const sel = document.getElementById('tipo_perfil_item');
  const cv = document.getElementById('block-cv');
  const srv = document.getElementById('block-srv');
  function sync() {
    if (sel.value === 'servicios') {
      cv.style.display = 'none';
      srv.style.display = '';
    } else {
      cv.style.display = '';
      srv.style.display = 'none';
    }
  }
  sel.addEventListener('change', sync);
  sync();
</script>
{% endblock %}
