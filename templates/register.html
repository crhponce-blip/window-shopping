{% extends "base.html" %}
{% block content %}
<section class="form-container fade-in glass-card">
  <h2>{{ t("Registro de empresa o usuario", "Company or User Registration", "公司或用戶註冊") }}</h2>
  <form action="{{ url_for('register') }}" method="POST" class="form-box">
    <label for="nombre">{{ t("Nombre de la empresa o usuario", "Company or User Name", "公司或用戶名稱") }}</label>
    <input type="text" id="nombre" name="nombre" required placeholder="{{ t('Ejemplo: Exportadora Andina', 'Example: Andean Exporter', '例如：安第斯出口公司') }}">
    <label for="email">{{ t("Correo electrónico", "Email", "電子郵件") }}</label>
    <input type="email" id="email" name="email" required placeholder="{{ t('Ejemplo: contacto@empresa.cl', 'Example: contact@company.com', '例如：contact@company.com') }}">
    <label for="password">{{ t("Contraseña", "Password", "密碼") }}</label>
    <input type="password" id="password" name="password" required placeholder="{{ t('Ingresa una contraseña', 'Enter a password', '輸入密碼') }}">
    <label for="perfil">{{ t("Selecciona tu tipo de perfil", "Select your profile type", "選擇您的個人資料類型") }}</label>
    <select id="perfil" name="perfil" required>
      <option value="cliente_extranjero">{{ t("Cliente extranjero (solo compras)", "Foreign client (only purchases)", "外國客戶（僅購買）") }}</option>
      <option value="nacional_compraventa">{{ t("Nacional - Compra/Venta", "National - Buy/Sell", "國內 - 買賣") }}</option>
      <option value="nacional_servicios">{{ t("Nacional - Servicios", "National - Services", "國內 - 服務") }}</option>
      <option value="nacional_mixto">{{ t("Nacional - Mixto (Fruta y Servicios)", "National - Mixed (Fruit & Services)", "國內 - 混合（水果與服務）") }}</option>
    </select>
    <label for="rol">{{ t("Selecciona tu rol", "Select your role", "選擇您的角色") }}</label>
    <select id="rol" name="rol" required>
      <option value="Productor">{{ t("Productor (Planta)", "Producer (Plant)", "生產商（工廠）") }}</option>
      <option value="Packing">{{ t("Packing", "Packing", "包裝廠") }}</option>
      <option value="Frigorífico">{{ t("Frigorífico", "Cold Storage", "冷藏庫") }}</option>
      <option value="Exportador">{{ t("Exportador", "Exporter", "出口商") }}</option>
      <option value="Agencia de aduana">{{ t("Agencia de aduana", "Customs Agency", "報關行") }}</option>
      <option value="Extraportuario">{{ t("Extraportuario", "Extra-port Service", "港外服務") }}</option>
      <option value="Transporte">{{ t("Transporte", "Transport", "運輸") }}</option>
      <option value="Cliente extranjero">{{ t("Cliente extranjero", "Foreign Client", "外國客戶") }}</option>
    </select>
    <button type="submit" class="btn mt-3">{{ t("Crear cuenta", "Create Account", "建立帳號") }}</button>
  </form>
  <p class="form-footer mt-3">
    {{ t("¿Ya tienes una cuenta?", "Already have an account?", "已經有帳號了？") }}
    <a href="{{ url_for('login') }}">{{ t("Inicia sesión aquí", "Log in here", "點此登入") }}</a>
  </p>
</section>
<script>
const perfilSelect = document.getElementById('perfil');
const rolSelect = document.getElementById('rol');
const rolesPorPerfil = {
  "cliente_extranjero": ["Cliente extranjero"],
  "nacional_compraventa": ["Productor", "Packing", "Frigorífico", "Exportador"],
  "nacional_servicios": ["Agencia de aduana", "Extraportuario", "Transporte", "Packing", "Frigorífico"],
  "nacional_mixto": ["Packing", "Frigorífico"]
};
perfilSelect.addEventListener('change', function() {
  const roles = rolesPorPerfil[this.value] || [];
  rolSelect.innerHTML = '';
  roles.forEach(rol => {
    const opt = document.createElement('option');
    opt.value = rol;
    opt.textContent = rol;
    rolSelect.appendChild(opt);
  });
});
</script>
{% endblock %}
