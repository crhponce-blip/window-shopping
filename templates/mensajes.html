{% extends "base.html" %}
{% block content %}
<section class="fade-in py-5">
  <div class="container">
    <h2 class="title-gradient text-center mb-4">{{ t("Centro de Mensajes") }}</h2>

    <!-- 📩 Enviar nuevo mensaje -->
    <div class="glass-card p-4 shadow-lg mb-4">
      <h5 class="mb-3 text-light">✉️ {{ t("Enviar un mensaje") }}</h5>
      <form method="POST" action="{{ url_for('mensajes') }}">
        <div class="form-floating mb-3">
          <input type="email" name="destino" id="destinoEmail" class="form-control" placeholder="usuario@ejemplo.com" required>
          <label for="destinoEmail">{{ t("Destinatario (correo)") }}</label>
        </div>

        <div class="form-floating mb-3">
          <textarea name="contenido" id="mensajeContenido" class="form-control" style="height:100px;" required></textarea>
          <label for="mensajeContenido">{{ t("Contenido del mensaje") }}</label>
        </div>

        <div class="d-grid">
          <button type="submit" class="btn btn-primary btn-lg">📨 {{ t("Enviar mensaje") }}</button>
        </div>
      </form>
    </div>

    <!-- 📨 Bandeja -->
    <div class="row">
      <div class="col-md-6">
        <div class="glass-card shadow-sm p-3">
          <h5 class="text-light">📥 {{ t("Recibidos") }}</h5>
          {% if recibidos %}
            <ul class="list-group list-group-flush">
              {% for m in recibidos %}
              <li class="list-group-item bg-transparent text-light border-light">
                <strong>{{ m.origen }}</strong><br>
                {{ m.contenido }}<br>
                <small class="text-muted">{{ m.fecha }}</small>
              </li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="text-muted">{{ t("No tienes mensajes recibidos.") }}</p>
          {% endif %}
        </div>
      </div>

      <div class="col-md-6">
        <div class="glass-card shadow-sm p-3">
          <h5 class="text-light">📤 {{ t("Enviados") }}</h5>
          {% if enviados %}
            <ul class="list-group list-group-flush">
              {% for m in enviados %}
              <li class="list-group-item bg-transparent text-light border-light">
                <strong>{{ m.destino }}</strong><br>
                {{ m.contenido }}<br>
                <small class="text-muted">{{ m.fecha }}</small>
              </li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="text-muted">{{ t("No has enviado mensajes.") }}</p>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="text-center mt-4">
      <a href="{{ url_for('dashboard_ext') }}" class="btn btn-outline-light">← {{ t("Volver al Panel") }}</a>
    </div>
  </div>
</section>
{% endblock %}
