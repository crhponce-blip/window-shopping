{% extends "base.html" %}
{% block content %}
<section class="mensajes-container fade-in">
  <h2 class="title-gradient">{{ t("Mensajería", "Messaging", "訊息系統") }}</h2>

  <div class="glass-card">
    <form method="POST">
      <label>{{ t("Destinatario (correo)") }}</label>
      <input type="email" name="destino" placeholder="usuario@ejemplo.com" required>

      <label>{{ t("Contenido del mensaje") }}</label>
      <textarea name="contenido" placeholder="{{ t('Escribe tu mensaje aquí...') }}" required></textarea>

      <button type="submit" class="btn btn-primary">📨 {{ t("Enviar Mensaje") }}</button>
    </form>
  </div>

  <div class="detalle-list">
    <div class="detalle-card">
      <h3>📥 {{ t("Recibidos") }}</h3>
      {% if recibidos %}
        <ul>
          {% for m in recibidos %}
            <li><strong>{{ m.origen }}</strong> — {{ m.contenido }}<br><small>{{ m.fecha }}</small></li>
          {% endfor %}
        </ul>
      {% else %}
        <p>{{ t("No tienes mensajes recibidos.", "No messages received.") }}</p>
      {% endif %}
    </div>

    <div class="detalle-card">
      <h3>📤 {{ t("Enviados") }}</h3>
      {% if enviados %}
        <ul>
          {% for m in enviados %}
            <li><strong>{{ m.destino }}</strong> — {{ m.contenido }}<br><small>{{ m.fecha }}</small></li>
          {% endfor %}
        </ul>
      {% else %}
        <p>{{ t("No has enviado mensajes.", "No messages sent.") }}</p>
      {% endif %}
    </div>
  </div>

  <div class="center">
    <a href="{{ url_for('dashboard_ext') }}" class="btn btn-light">← {{ t("Volver al Panel") }}</a>
  </div>
</section>
{% endblock %}
