{% extends "base.html" %}
{% block content %}
<section class="dashboard-container fade-in">
  <h2 class="title-gradient">{{ t("Panel Principal","Main Dashboard","ä¸»é¢æ¿") }}</h2>

  <div class="user-info glass-card mt-2">
    <p><strong>{{ t("Empresa:","Company:","å…¬å¸ï¼š") }}</strong> {{ user.empresa }}</p>
    <p><strong>{{ t("Correo:","Email:","é›»å­éƒµä»¶ï¼š") }}</strong> {{ user.email }}</p>
    <p><strong>{{ t("Rol:","Role:","è§’è‰²ï¼š") }}</strong> {{ user.rol }}</p>
    <p><strong>{{ t("Tipo de Cuenta:","Account Type:","å¸³æˆ¶é¡å‹ï¼š") }}</strong> {{ user.tipo }}</p>
  </div>

  <div class="dashboard-actions mt-3" style="display:flex;gap:12px;flex-wrap:wrap;">
    {% if user.tipo == "compras" %}
      <a href="{{ url_for('compras') }}" class="btn btn-primary">ğŸ›’ {{ t("Explorar Ofertas","Browse Offers","ç€è¦½å•†å“") }}</a>
    {% elif user.tipo == "servicios" %}
      <a href="{{ url_for('servicios') }}" class="btn btn-secondary">ğŸ§° {{ t("Ver Servicios","View Services","æŸ¥çœ‹æœå‹™") }}</a>
    {% elif user.tipo in ("compraventa","mixto") %}
      <a href="{{ url_for('ventas') }}" class="btn btn-primary">ğŸ’° {{ t("Ver Demandas","View Demands","æŸ¥çœ‹éœ€æ±‚") }}</a>
      <a href="{{ url_for('compras') }}" class="btn btn-secondary">ğŸ›’ {{ t("Explorar Ofertas","Browse Offers","ç€è¦½å•†å“") }}</a>
      <a href="{{ url_for('servicios') }}" class="btn btn-secondary">ğŸ§° {{ t("Explorar Servicios","Browse Services","æ¢ç´¢æœå‹™") }}</a>
    {% endif %}
  </div>

  {% if publicaciones %}
    <div class="glass-card mt-2">
      <h3>{{ t("Sugerencias para ti","Suggestions for you","ç‚ºä½ æ¨è–¦") }}</h3>
      <ul class="detalle-list">
        {% for p in publicaciones %}
        <li class="detalle-card">
          <h4>{{ p.empresa }}</h4>
          <p><strong>{{ t("Tipo","Type","é¡å‹") }}:</strong> {{ p.tipo }}</p>
          <p><strong>{{ t("Rol","Role","è§’è‰²") }}:</strong> {{ p.rol }}</p>
          {% if p.producto %}<p><strong>{{ t("Producto","Product","ç”¢å“") }}:</strong> {{ p.producto }}</p>{% endif %}
          {% if p.precio %}<p><strong>{{ t("Precio","Price","åƒ¹æ ¼") }}:</strong> {{ p.precio }}</p>{% endif %}
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;">
            <a href="{{ url_for('carrito_agregar', pub_id=p.id) }}" class="btn btn-secondary">ğŸ›ï¸ {{ t("Agregar al carrito","Add to Cart","åŠ å…¥è³¼ç‰©è»Š") }}</a>
            <form method="post" action="{{ url_for('ocultar_publicacion', pub_id=p.id) }}">
              <button type="submit" class="btn btn-secondary">ğŸ™ˆ {{ t("Eliminar de mi vista","Hide from my view","å¾æˆ‘çš„è¦–åœ–éš±è—") }}</button>
            </form>
          </div>
        </li>
        {% endfor %}
      </ul>

      <form method="post" action="{{ url_for('restablecer_ocultos') }}" class="mt-2">
        <button type="submit" class="btn btn-warning">â™»ï¸ {{ t("Restablecer ocultos","Restore hidden","æ¢å¾©éš±è—é …ç›®") }}</button>
      </form>
    </div>
  {% else %}
    <div class="glass-card mt-2">
      <p class="no-results">{{ t("AÃºn no hay publicaciones para tu perfilã€‚","There are no listings for your profile yetã€‚","ç›®å‰æ²’æœ‰é©åˆä½ å€‹äººè³‡æ–™çš„è²¼æ–‡ã€‚") }}</p>
    </div>
  {% endif %}
</section>
{% endblock %}
