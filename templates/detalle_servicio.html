{% extends "base.html" %}
{% block content %}

<section class="detalle-container">
    <h2>ğŸ§° {{ t("Servicios disponibles", "Available Services", "å¯ç”¨çš„æœå‹™") }}</h2>

    <!-- BUSCADOR -->
    <form method="get" action="{{ url_for('servicios') }}" class="search-bar">
        <input type="text" name="q" placeholder="{{ t('Buscar por empresa o tipo de servicio...', 'Search by company or service type...', 'æŒ‰å…¬å¸æˆ–æœå‹™é¡å‹æœå°‹...') }}" value="{{ request.args.get('q', '') }}">
        <button type="submit" class="btn btn-primary">{{ t("Buscar", "Search", "æœå°‹") }}</button>
    </form>

    <!-- MENSAJE SI NO HAY DATOS -->
    {% if not data %}
        <p class="no-results">{{ t("No hay servicios disponibles para tu perfil.", "No services available for your profile.", "ç›®å‰æ²’æœ‰å¯ç”¨çš„æœå‹™ã€‚") }}</p>
    {% else %}
        <!-- LISTADO DE SERVICIOS -->
        <div class="detalle-list">
            {% for empresa in data %}
                <div class="detalle-card">
                    <h3>{{ empresa.empresa }}</h3>
                    <p><strong>{{ t("Rol:", "Role:", "è§’è‰²ï¼š") }}</strong> {{ empresa.rol }}</p>
                    <p><strong>{{ t("DescripciÃ³n:", "Description:", "æè¿°ï¼š") }}</strong> {{ empresa.descripcion }}</p>

                    {% if empresa.items %}
                        <ul>
                            {% for item in empresa.items %}
                                {% if item.tipo == "servicio" %}
                                    <li>{{ item.nombre }} - {{ item.detalle }}</li>
                                {% endif %}
                            {% endfor %}
                        </ul>
                    {% endif %}

                    <form method="post" action="{{ url_for('agregar_carrito', username=empresa.username) }}">
                        <button type="submit" class="btn btn-secondary">
                            ğŸ§¾ {{ t("Solicitar servicio", "Request Service", "ç”³è«‹æœå‹™") }}
                        </button>
                    </form>
                </div>
            {% endfor %}
        </div>
    {% endif %}
</section>

{% endblock %}
