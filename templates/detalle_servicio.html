{% extends "base.html" %}
{% block title %}{{ t("Servicios disponibles", "Available Services", "å¯ç”¨æœå‹™") }}{% endblock %}

{% block content %}
<div class="detalle-container">
  <div class="detalle-card">
    <div class="detalle-header">
      <h2>{{ t("Servicios logÃ­sticos disponibles", "Available Logistic Services", "ç‰©æµæœå‹™æ¸…å–®") }}</h2>
      <p class="sub-text">{{ t("Selecciona los servicios que deseas agregar a tu carrito", "Select the services you want to add to your cart", "é¸æ“‡è¦åŠ å…¥è³¼ç‰©è»Šçš„æœå‹™") }}</p>
    </div>

    <!-- ğŸ” Buscador -->
    <form method="GET" class="search-form">
      <input type="text" name="q" placeholder="{{ t('Buscar servicio o empresa...', 'Search service or company...', 'æœå°‹æœå‹™æˆ–å…¬å¸...') }}" value="{{ query }}">
      <button type="submit" class="btn btn-primary">{{ t("Buscar", "Search", "æœå°‹") }}</button>
    </form>

    <!-- ğŸ§¾ Listado -->
    <form method="POST" action="{{ url_for('cart_add') }}">
      <ul class="detalle-lista">
        {% if data %}
          {% for c in data %}
            {% if c.items %}
              {% for item in c.items %}
                {% if item.tipo == "servicio" %}
                  <li class="detalle-item">
                    <div class="item-info">
                      <h3>{{ c.empresa }}</h3>
                      <p><strong>{{ t("Servicio:", "Service:", "æœå‹™ï¼š") }}</strong> {{ item.servicio }}</p>
                      {% if item.ubicacion %}
                        <p><strong>{{ t("UbicaciÃ³n:", "Location:", "ä½ç½®ï¼š") }}</strong> {{ item.ubicacion }}</p>
                      {% endif %}
                      {% if item.capacidad %}
                        <p><strong>{{ t("Capacidad:", "Capacity:", "å®¹é‡ï¼š") }}</strong> {{ item.capacidad }}</p>
                      {% endif %}
                    </div>

                    <div class="item-actions">
                      <input type="hidden" name="item" value='{{ item | tojson }}'>
                      <button type="submit" class="btn btn-success">
                        {{ t("Agregar al carrito ğŸ›’", "Add to cart ğŸ›’", "åŠ å…¥è³¼ç‰©è»Š ğŸ›’") }}
                      </button>
                      <a href="{{ url_for('perfil', id=c.id) }}" class="btn btn-secondary">
                        {{ t("Ver perfil", "View profile", "æŸ¥çœ‹è³‡æ–™") }}
                      </a>
                    </div>
                  </li>
                {% endif %}
              {% endfor %}
            {% endif %}
          {% endfor %}
        {% else %}
          <li class="no-results">{{ t("No hay servicios disponibles actualmente.", "No services available at the moment.", "ç›®å‰æ²’æœ‰å¯ç”¨çš„æœå‹™ã€‚") }}</li>
        {% endif %}
      </ul>
    </form>

    <div class="detalle-footer">
      <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
        {{ t("Volver al panel", "Back to Dashboard", "è¿”å›æ§åˆ¶å°") }}
      </a>
    </div>
  </div>
</div>

<style>
{{ self.parent() }}
</style>
{% endblock %}
